{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nexport default async function getImagesByQuery(query, page) {\n  const MAIN_URL = 'https://pixabay.com';\n  const END_POINT = '/api/';\n  const params = new URLSearchParams({\n    key: '50274791-f4b76ab6fee4d49d8c558ca21',\n    q: query,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    page: page,\n    per_page: 15,\n  });\n  const url = `${MAIN_URL}${END_POINT}?${params}`;\n\n  try {\n    const response = await axios.get(url);\n    // Перевірка, чи є очікувані дані\n    if (!response.data || !response.data.hits) {\n      throw new Error('Невірна відповідь від API');\n    }\n    return {\n      hits: response.data.hits,\n      totalHits: response.data.totalHits,\n    };\n  } catch (error) {\n    console.log('Помилка при запиті до Pixabay:', error);\n    throw error;\n  }\n}\n","import SimpleLightbox from 'simplelightbox';\nconst container = document.querySelector('.gallery');\nconst lightBox = new SimpleLightbox('.gallery a');\nconst loaderContainer = document.querySelector('.loader-container');\nconst loadMoreBtn = document.querySelector('.load-more');\nexport async function createGallery(images) {\n  const markup = images\n    .map(image => {\n      const {\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      } = image;\n\n      return `\n        <li><a class=\"gallery-link\" href=\"${largeImageURL}\">\n          <div class=\"gallery-item\">\n            <img class=\"gallery-image\" src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\" />\n            <div class=\"gallery-info\">\n              <p><b>Likes:</b> ${likes}</p>\n              <p><b>Views:</b> ${views}</p>\n              <p><b>Comments:</b> ${comments}</p>\n              <p><b>Downloads:</b> ${downloads}</p>\n            </div>\n          </div>\n        </a></li>\n      `;\n    })\n    .join('');\n\n  container.insertAdjacentHTML('beforeend', markup);\n\n  lightBox.refresh();\n}\n\nexport function clearGallery() {\n  container.innerHTML = '';\n}\n\nexport function showLoader() {\n  loaderContainer.classList.remove('hidden');\n}\n\nexport function hideLoader() {\n  loaderContainer.classList.add('hidden');\n}\nexport function showLoadMoreButton() {\n  loadMoreBtn.style.display = 'block';\n}\n\nexport function hideLoadMoreButton() {\n  loadMoreBtn.style.display = 'none';\n}\n","import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport getImagesByQuery from './js/pixabay-api.js';\nimport * as all from './js/render-functions';\n\nconst container = document.querySelector('.gallery');\nconst form = document.querySelector('.form');\nconst loadMoreBtn = document.querySelector('.load-more');\n\nlet currentPage = 1;\nlet currentQuery = '';\nlet totalLoaded = 0;\nlet totalHits = 0;\n\nlet lightbox = new SimpleLightbox('.gallery-item a', {\n  captionsData: 'alt',\n  captionDelay: 250,\n});\n\nform.addEventListener('submit', async e => {\n  e.preventDefault();\n  const userValue = e.target.elements['search-text'].value.trim();\n\n  if (userValue === '') {\n    iziToast.show({\n      title: 'Warning',\n      message: 'Please enter a search term before submitting!',\n      position: 'topRight',\n      color: 'yellow',\n    });\n    e.target.reset();\n    return;\n  }\n\n  if (userValue !== currentQuery) {\n    currentPage = 1;\n    currentQuery = userValue;\n    totalLoaded = 0;\n    all.clearGallery();\n  }\n\n  all.showLoader();\n  await fetchAndRenderImages();\n  all.hideLoader();\n  e.target.reset();\n});\n\nloadMoreBtn.addEventListener('click', async () => {\n  currentPage += 1;\n  all.showLoader();\n  await fetchAndRenderImages();\n  all.hideLoader();\n  const firstCard = container.querySelector('.gallery-item');\n  if (firstCard) {\n    const cardHeight = firstCard.getBoundingClientRect().height;\n    window.scrollBy({\n      top: cardHeight * 2,\n      left: 0,\n      behavior: 'smooth',\n    });\n  }\n});\n\nasync function fetchAndRenderImages() {\n  try {\n    const { hits, totalHits: total } = await getImagesByQuery(\n      currentQuery,\n      currentPage\n    );\n\n    if (currentPage === 1) {\n      totalHits = total;\n    }\n\n    if (hits.length === 0 && currentPage === 1) {\n      iziToast.show({\n        title: 'Error',\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n        position: 'topRight',\n        color: 'red',\n      });\n      loadMoreBtn.style.display = 'none';\n      return;\n    }\n\n    const markup = all.createGallery(hits);\n    container.insertAdjacentHTML('beforeend', markup);\n    lightbox.refresh();\n\n    totalLoaded += hits.length;\n\n    if (totalLoaded >= totalHits) {\n      loadMoreBtn.style.display = 'none';\n      iziToast.show({\n        title: 'Info',\n        message: \"We're sorry, but you've reached the end of search results.\",\n        position: 'topRight',\n        color: 'blue',\n      });\n    } else {\n      loadMoreBtn.style.display = 'block';\n    }\n  } catch (error) {\n    iziToast.show({\n      title: 'Error',\n      message: 'Something went wrong. Please try again later.',\n      position: 'topRight',\n      color: 'red',\n    });\n    console.error('Помилка при запиті:', error);\n  }\n}\n"],"names":["getImagesByQuery","query","page","MAIN_URL","END_POINT","params","url","response","axios","error","container","lightBox","SimpleLightbox","loaderContainer","createGallery","images","markup","image","webformatURL","largeImageURL","tags","likes","views","comments","downloads","clearGallery","showLoader","hideLoader","form","loadMoreBtn","currentPage","currentQuery","totalLoaded","totalHits","lightbox","e","userValue","iziToast","all.clearGallery","all.showLoader","fetchAndRenderImages","all.hideLoader","firstCard","cardHeight","hits","total","all.createGallery"],"mappings":"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"}